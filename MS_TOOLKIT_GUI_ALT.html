<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MS Toolkit | NEON FLUX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: '#020617', // Slate 950
                        surface: '#0f172a', // Slate 900
                        primary: '#06b6d4', // Cyan 500
                        'primary-dim': '#0891b2', // Cyan 600
                        secondary: '#6366f1', // Indigo 500
                        text: '#f8fafc', // Slate 50
                        muted: '#94a3b8', // Slate 400
                        danger: '#f43f5e', // Rose 500
                        success: '#10b981', // Emerald 500
                        border: '#1e293b' // Slate 800
                    },
                    fontFamily: {
                        mono: ['"Space Mono"', 'monospace'],
                        sans: ['"Outfit"', 'sans-serif']
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(6, 182, 212, 0.15)',
                        'glow-hover': '0 0 30px rgba(6, 182, 212, 0.3)',
                        'neon': '0 0 10px theme("colors.primary"), 0 0 20px theme("colors.secondary")'
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;500;700;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            background-color: theme('colors.background');
            color: theme('colors.text');
            font-family: 'Outfit', sans-serif;
            background-image:
                radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.08), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(6, 182, 212, 0.08), transparent 25%);
        }

        .font-mono {
            font-family: 'Space Mono', monospace;
        }

        /* Neon Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #020617;
        }

        ::-webkit-scrollbar-thumb {
            background: #1e293b;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #06b6d4;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        .neon-border {
            position: relative;
            transition: all 0.3s ease;
        }

        .neon-border::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 0%;
            height: 1px;
            background: theme('colors.primary');
            transition: width 0.3s ease;
            box-shadow: 0 0 10px theme('colors.primary');
        }

        .neon-border:hover::after {
            width: 100%;
        }

        .cyber-button {
            background: linear-gradient(45deg, transparent 5%, theme('colors.primary') 5%);
            color: #000;
            transition: all 0.3s ease;
        }

        .cyber-button:hover {
            box-shadow: 0 0 15px theme('colors.primary');
            transform: translateY(-2px);
        }

        input:focus {
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.1);
        }
    </style>
</head>

<body
    class="min-h-screen flex flex-col p-4 md:p-8 relative overflow-x-hidden selection:bg-primary selection:text-white">

    <div class="max-w-6xl mx-auto w-full relative z-10">
        <!-- HEADER -->
        <header class="mb-12 flex justify-between items-center group">
            <div class="relative">
                <div
                    class="absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200">
                </div>
                <div class="relative">
                    <h1 class="text-5xl md:text-7xl font-black tracking-tighter text-white mb-2"
                        style="text-shadow: 0 0 30px rgba(6,182,212,0.3);">
                        MS<span
                            class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">FLUX</span>
                    </h1>
                    <div class="flex items-center gap-3">
                        <span class="h-2 w-2 rounded-full bg-success animate-pulse"></span>
                        <p class="text-muted font-mono text-xs tracking-[0.2em] uppercase">System v2.1 // Ready</p>
                    </div>
                </div>
            </div>

            <div class="hidden md:block">
                <div class="glass-panel px-4 py-2 rounded-full flex gap-4 items-center">
                    <span class="text-[10px] font-mono text-muted">SECURE MODE</span>
                    <div class="h-3 w-px bg-white/10"></div>
                    <span class="text-[10px] font-mono text-primary animate-pulse">‚óè CONNECTED</span>
                </div>
            </div>
        </header>

        <!-- NAVIGATION -->
        <nav class="flex justify-center mb-10">
            <div class="glass-panel p-1 rounded-full flex gap-1 overflow-x-auto max-w-full">
                <button onclick="switchTab('providers')"
                    class="nav-btn active px-6 py-2 rounded-full font-bold text-sm transition-all duration-300 bg-primary/20 text-primary shadow-[0_0_15px_rgba(6,182,212,0.3)]">
                    Providers
                </button>
                <button onclick="switchTab('roi')"
                    class="nav-btn px-6 py-2 rounded-full font-bold text-sm text-muted hover:text-white transition-all duration-300">
                    ROI Calc
                </button>
                <button onclick="switchTab('azeo')"
                    class="nav-btn px-6 py-2 rounded-full font-bold text-sm text-muted hover:text-white transition-all duration-300">
                    AZEO Sim
                </button>
                <button onclick="switchTab('risk')"
                    class="nav-btn px-6 py-2 rounded-full font-bold text-sm text-muted hover:text-white transition-all duration-300">
                    Risk Ops
                </button>
            </div>
        </nav>

        <!-- CONTENT AREA -->
        <main class="relative min-h-[400px]">

            <!-- PROVIDERS -->
            <section id="providers" class="tab-content animate-fade-in block">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Provider Card 1 -->
                    <div
                        class="glass-panel rounded-2xl p-6 hover:border-primary/30 transition-all duration-300 group hover:-translate-y-1">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-1">Plastiq</h3>
                                <div
                                    class="h-1 w-8 bg-primary rounded-full group-hover:w-full transition-all duration-500">
                                </div>
                            </div>
                            <span
                                class="bg-primary/10 text-primary text-xs font-mono font-bold px-3 py-1 rounded-full border border-primary/20">2.85%</span>
                        </div>
                        <p class="text-muted text-sm leading-relaxed mb-6 font-light">
                            Premium bill payment service accepting generic CCs. Ideal for mortgage, rent, and high-value
                            recurring bills.
                        </p>
                        <div class="flex justify-between items-center border-t border-white/5 pt-4">
                            <span class="text-[10px] font-mono text-muted uppercase tracking-wider">Status</span>
                            <span class="text-[10px] font-bold text-success flex items-center gap-1">
                                <span class="h-1.5 w-1.5 rounded-full bg-success"></span> ACTIVE
                            </span>
                        </div>
                    </div>

                    <!-- Provider Card 2 -->
                    <div
                        class="glass-panel rounded-2xl p-6 hover:border-secondary/30 transition-all duration-300 group hover:-translate-y-1">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-1">Melio</h3>
                                <div
                                    class="h-1 w-8 bg-secondary rounded-full group-hover:w-full transition-all duration-500">
                                </div>
                            </div>
                            <span
                                class="bg-primary/10 text-primary text-xs font-mono font-bold px-3 py-1 rounded-full border border-primary/20">2.9%</span>
                        </div>
                        <p class="text-muted text-sm leading-relaxed mb-6 font-light">
                            B2B payment platform. Requires business verification. Excellent for vendor payments and
                            operational expenses.
                        </p>
                        <div class="flex justify-between items-center border-t border-white/5 pt-4">
                            <span class="text-[10px] font-mono text-muted uppercase tracking-wider">Status</span>
                            <span class="text-[10px] font-bold text-success flex items-center gap-1">
                                <span class="h-1.5 w-1.5 rounded-full bg-success"></span> ACTIVE
                            </span>
                        </div>
                    </div>

                    <!-- Provider Card 3 -->
                    <div
                        class="glass-panel rounded-2xl p-6 hover:border-success/30 transition-all duration-300 group hover:-translate-y-1">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-1">Amex Send</h3>
                                <div
                                    class="h-1 w-8 bg-success rounded-full group-hover:w-full transition-all duration-500">
                                </div>
                            </div>
                            <span
                                class="bg-success/10 text-success text-xs font-mono font-bold px-3 py-1 rounded-full border border-success/20">0.0%</span>
                        </div>
                        <p class="text-muted text-sm leading-relaxed mb-6 font-light">
                            Native Amex P2P integration. Limits vary by card tier. No cash advance fees if configured
                            correctly.
                        </p>
                        <div class="flex justify-between items-center border-t border-white/5 pt-4">
                            <span class="text-[10px] font-mono text-muted uppercase tracking-wider">Status</span>
                            <span class="text-[10px] font-bold text-success flex items-center gap-1">
                                <span class="h-1.5 w-1.5 rounded-full bg-success"></span> ACTIVE
                            </span>
                        </div>
                    </div>

                    <!-- Provider Card 4 -->
                    <div
                        class="glass-panel rounded-2xl p-6 hover:border-danger/30 transition-all duration-300 group hover:-translate-y-1">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-2xl font-bold text-white mb-1">P2P Apps</h3>
                                <div
                                    class="h-1 w-8 bg-danger rounded-full group-hover:w-full transition-all duration-500">
                                </div>
                            </div>
                            <span
                                class="bg-danger/10 text-danger text-xs font-mono font-bold px-3 py-1 rounded-full border border-danger/20">High
                                Risk</span>
                        </div>
                        <p class="text-muted text-sm leading-relaxed mb-6 font-light">
                            Venmo, PayPal, CashApp. 2.9% + $0.30 typical. High shutdown risk for circular loops. Use
                            with caution.
                        </p>
                        <div class="flex justify-between items-center border-t border-white/5 pt-4">
                            <span class="text-[10px] font-mono text-muted uppercase tracking-wider">Status</span>
                            <span class="text-[10px] font-bold text-danger flex items-center gap-1">
                                <span class="h-1.5 w-1.5 rounded-full bg-danger"></span> CAUTION
                            </span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ROI CALCULATOR -->
            <section id="roi" class="tab-content hidden h-full">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <!-- Controls -->
                    <div class="lg:col-span-5 space-y-6">
                        <div class="glass-panel p-6 rounded-2xl">
                            <label
                                class="block text-primary text-xs font-bold uppercase tracking-widest mb-2 ml-1">Spend
                                Amount ($)</label>
                            <input type="number" id="roiSpend" value="1000"
                                class="w-full bg-surface/50 border border-white/10 focus:border-primary text-white p-4 font-mono text-lg rounded-xl focus:outline-none transition-all focus:ring-1 focus:ring-primary/50 placeholder-white/20">
                        </div>

                        <div class="glass-panel p-6 rounded-2xl">
                            <label class="block text-primary text-xs font-bold uppercase tracking-widest mb-2 ml-1">Fee
                                Percentage (%)</label>
                            <input type="number" id="roiFee" value="2.9" step="0.1"
                                class="w-full bg-surface/50 border border-white/10 focus:border-primary text-white p-4 font-mono text-lg rounded-xl focus:outline-none transition-all focus:ring-1 focus:ring-primary/50">
                        </div>

                        <div class="flex gap-4">
                            <div class="glass-panel p-6 rounded-2xl w-1/2">
                                <label
                                    class="block text-primary text-xs font-bold uppercase tracking-widest mb-2 ml-1">Pts
                                    Multiplier</label>
                                <input type="number" id="roiPtsPerDollar" value="2.0" step="0.1"
                                    class="w-full bg-surface/50 border border-white/10 focus:border-primary text-white p-4 font-mono text-lg rounded-xl focus:outline-none transition-all focus:ring-1 focus:ring-primary/50">
                            </div>
                            <div class="glass-panel p-6 rounded-2xl w-1/2">
                                <label
                                    class="block text-primary text-xs font-bold uppercase tracking-widest mb-2 ml-1">Pt
                                    Value ($)</label>
                                <input type="number" id="roiPtValue" value="0.02" step="0.001"
                                    class="w-full bg-surface/50 border border-white/10 focus:border-primary text-white p-4 font-mono text-lg rounded-xl focus:outline-none transition-all focus:ring-1 focus:ring-primary/50">
                            </div>
                        </div>

                        <button onclick="calculateROI()"
                            class="w-full py-4 rounded-xl font-black uppercase tracking-widest bg-gradient-to-r from-primary to-secondary text-white hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] hover:scale-[1.02] transition-all transform active:scale-95">
                            Execute Calculation
                        </button>
                    </div>

                    <!-- Results Display -->
                    <div class="lg:col-span-7 flex flex-col justify-center">
                        <div id="roiResults"
                            class="glass-panel rounded-3xl p-8 lg:p-12 relative overflow-hidden hidden opacity-0 transition-opacity duration-500 border-t border-white/10">
                            <!-- Background Glow -->
                            <div
                                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/20 rounded-full blur-[100px] pointer-events-none">
                            </div>

                            <div class="relative z-10 grid grid-cols-2 gap-8 mb-12 border-b border-white/5 pb-8">
                                <div>
                                    <div class="text-muted text-xs font-mono uppercase mb-2">Total Fees</div>
                                    <div id="resFees" class="text-3xl text-white font-mono font-light">$0.00</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-muted text-xs font-mono uppercase mb-2">Rewards Value</div>
                                    <div id="resRewards" class="text-3xl text-primary font-mono font-bold">$0.00</div>
                                </div>
                            </div>

                            <div class="relative z-10 text-center">
                                <div class="text-muted text-sm font-bold uppercase tracking-[0.3em] mb-4">Net Profit
                                    Generated</div>
                                <div id="resProfit"
                                    class="text-7xl md:text-8xl font-black text-white tracking-tighter mb-6 drop-shadow-2xl">
                                    $0.00</div>
                                <div id="resROI"
                                    class="inline-block px-6 py-2 bg-white/5 backdrop-blur-md border border-white/10 text-white font-mono rounded-full text-sm">
                                    0.00% ROI</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AZEO SIMULATOR -->
            <section id="azeo" class="tab-content hidden">
                <div
                    class="mb-8 flex justify-between items-center bg-gradient-to-r from-surface to-background p-6 rounded-2xl border border-white/5">
                    <div>
                        <h2 class="text-2xl font-bold text-white mb-2">AZEO Optimization</h2>
                        <p class="text-muted text-sm">Target Utilization: <span class="text-primary font-mono">
                                <10%< /span> on Primary, <span class="text-muted font-mono">0%</span> on others.</p>
                    </div>
                    <button onclick="addCard()"
                        class="px-6 py-3 rounded-full border border-primary/30 text-primary font-bold text-xs uppercase hover:bg-primary hover:text-white transition-all hover:shadow-[0_0_15px_rgba(6,182,212,0.3)]">
                        + Add Credit Line
                    </button>
                </div>

                <!-- Card Grid -->
                <div id="cardInputs" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                    <!-- Dynamic cards go here -->
                </div>

                <div class="flex justify-center mb-12">
                    <button onclick="simulateAZEO()"
                        class="px-12 py-4 rounded-xl font-black uppercase tracking-widest bg-white text-black hover:bg-primary hover:text-white hover:shadow-[0_0_20px_rgba(6,182,212,0.5)] hover:scale-105 transition-all transform">
                        Run Optimization
                    </button>
                </div>

                <!-- Simulation Results -->
                <div id="azeoResults" class="hidden animate-fade-in">
                    <!-- JS Injected -->
                </div>
            </section>

            <!-- RISK CHECKER -->
            <section id="risk" class="tab-content hidden">
                <div class="max-w-2xl mx-auto">
                    <div class="glass-panel rounded-2xl p-8 mb-8 border border-white/10">
                        <label class="block text-primary text-xs font-bold uppercase tracking-widest mb-4">Transaction
                            Sequence Analysis</label>
                        <textarea id="riskSteps" rows="5"
                            class="w-full bg-black/40 border border-white/10 focus:border-secondary text-white p-6 font-mono text-sm rounded-xl focus:outline-none transition-all placeholder-white/10 mb-6"
                            placeholder="Example: Chase, Plastiq, Rent, Chase"></textarea>

                        <div class="flex items-center gap-3 text-muted text-xs bg-white/5 p-4 rounded-lg">
                            <span class="text-lg">üí°</span>
                            <p>Detects closed loop funding and circular references that trigger bank risk algorithms.
                            </p>
                        </div>
                    </div>

                    <button onclick="checkRisk()"
                        class="w-full py-5 rounded-xl border border-white/10 bg-white/5 text-white font-bold uppercase tracking-widest hover:bg-danger hover:border-danger hover:shadow-[0_0_20px_rgba(244,63,94,0.4)] transition-all duration-300">
                        Initiate Security Scan
                    </button>

                    <div id="riskResults" class="mt-8 space-y-4 hidden">
                        <!-- Results -->
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // Init
        window.addEventListener('DOMContentLoaded', () => {
            addCard(); // Add initial card 1
            addCard(); // Add initial card 2

            // Show ROI on load
            switchTab('roi');
            calculateROI();
        });

        // Tabs
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
                el.classList.remove('block', 'animate-fade-in');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary/20', 'text-primary', 'shadow-[0_0_15px_rgba(6,182,212,0.3)]');
                btn.classList.add('text-muted');
            });

            const target = document.getElementById(id);
            target.classList.remove('hidden');
            target.classList.add('block', 'animate-fade-in');

            // Simple logic to highlight the clicked button would go here if we were strictly managing state, 
            // but the inline onclick style swap in the HTML handles the visual transition basics for this demo file.
            // For a real app, update classList based on 'id' match.
        }

        // Listeners for active state
        const navBtns = document.querySelectorAll('.nav-btn');
        navBtns.forEach(btn => {
            btn.addEventListener('click', function () {
                navBtns.forEach(b => {
                    b.className = "nav-btn px-6 py-2 rounded-full font-bold text-sm text-muted hover:text-white transition-all duration-300";
                });
                this.className = "nav-btn active px-6 py-2 rounded-full font-bold text-sm transition-all duration-300 bg-primary/20 text-primary shadow-[0_0_15px_rgba(6,182,212,0.3)]";
            });
        });

        // ROI Logic
        function calculateROI() {
            const spend = parseFloat(document.getElementById('roiSpend').value) || 0;
            const feePct = parseFloat(document.getElementById('roiFee').value) / 100 || 0;
            const ptsPerDollar = parseFloat(document.getElementById('roiPtsPerDollar').value) || 0;
            const ptValue = parseFloat(document.getElementById('roiPtValue').value) || 0;

            const fees = spend * feePct;
            const points = spend * ptsPerDollar;
            const rewardsValue = points * ptValue;
            const netProfit = rewardsValue - fees;
            const roi = fees > 0 ? ((rewardsValue - fees) / fees) * 100 : 0;

            document.getElementById('resFees').innerText = `$${fees.toLocaleString(undefined, { minimumFractionDigits: 2 })}`;
            document.getElementById('resRewards').innerText = `$${rewardsValue.toLocaleString(undefined, { minimumFractionDigits: 2 })}`;

            const profitEl = document.getElementById('resProfit');
            profitEl.innerText = `$${netProfit.toLocaleString(undefined, { minimumFractionDigits: 2 })}`;
            profitEl.className = netProfit >= 0
                ? "text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary tracking-tighter mb-6 drop-shadow-2xl"
                : "text-7xl md:text-8xl font-black text-danger tracking-tighter mb-6 drop-shadow-2xl";

            const roiEl = document.getElementById('resROI');
            roiEl.innerText = `${roi.toFixed(2)}% ROI`;
            roiEl.className = netProfit >= 0
                ? "inline-block px-6 py-2 bg-success/20 border border-success/30 text-success font-mono rounded-full text-sm"
                : "inline-block px-6 py-2 bg-danger/20 border border-danger/30 text-danger font-mono rounded-full text-sm";

            const results = document.getElementById('roiResults');
            results.classList.remove('hidden');
            setTimeout(() => results.classList.remove('opacity-0'), 50);
        }

        // AZEO Logic
        let cardCount = 0;
        function addCard() {
            cardCount++;
            const div = document.createElement('div');
            div.className = "glass-panel p-6 rounded-2xl relative group border border-white/5 hover:border-white/20 transition-all";
            div.innerHTML = `
                <div class="absolute top-4 right-4 text-xs text-muted font-mono opacity-50 group-hover:opacity-100 group-hover:text-primary">#${cardCount}</div>
                <div class="mb-4">
                    <label class="block text-muted text-[10px] uppercase tracking-widest mb-2">Current Balance</label>
                    <input type="number" placeholder="0.00" class="card-balance w-full bg-black/40 border border-white/10 focus:border-white/50 text-white p-3 font-mono text-sm rounded-lg focus:outline-none transition-all">
                </div>
                 <div>
                    <label class="block text-muted text-[10px] uppercase tracking-widest mb-2">Credit Limit</label>
                    <input type="number" placeholder="5000" class="card-limit w-full bg-black/40 border border-white/10 focus:border-white/50 text-white p-3 font-mono text-sm rounded-lg focus:outline-none transition-all">
                </div>
            `;
            document.getElementById('cardInputs').appendChild(div);
        }

        function simulateAZEO() {
            const balances = Array.from(document.querySelectorAll('.card-balance')).map(i => parseFloat(i.value) || 0);
            const limits = Array.from(document.querySelectorAll('.card-limit')).map(i => parseFloat(i.value) || 0);

            if (limits.length === 0 || limits.every(l => l === 0)) {
                alert('Limit Validation Error: Please define at least one credit line.');
                return;
            }

            let maxIdx = 0;
            for (let i = 1; i < limits.length; i++) {
                if (limits[i] > limits[maxIdx]) maxIdx = i;
            }

            let html = `<div class="glass-panel p-8 rounded-3xl relative overflow-hidden border border-primary/30">
                <div class="absolute top-0 right-0 p-3 bg-gradient-to-bl from-primary to-transparent text-black font-bold font-mono text-xs uppercase px-6">Optimal Strategy</div>
                <div class="space-y-4 mt-4">`;

            let totalPay = 0;

            limits.forEach((limit, i) => {
                const isPrimary = i === maxIdx;
                const target = isPrimary ? limit * 0.09 : 0;
                const current = balances[i];
                const payment = Math.max(0, current - target);
                totalPay += payment;

                html += `
                    <div class="flex justify-between items-center border-b border-white/5 pb-4 last:border-0 last:pb-0">
                        <div class="flex items-center gap-4">
                            <div class="h-10 w-10 rounded-full flex items-center justify-center font-bold text-xs ${isPrimary ? 'bg-primary text-black' : 'bg-white/10 text-white'}">${i + 1}</div>
                            <div>
                                <div class="text-[10px] font-mono text-muted uppercase tracking-wider mb-1">Role</div>
                                <div class="${isPrimary ? 'text-primary' : 'text-white'} text-sm font-bold">${isPrimary ? 'PRIMARY CARRIER' : 'ZERO BALANCE'}</div>
                            </div>
                        </div>
                        <div class="text-right">
                             <div class="text-[10px] text-muted mb-1">Target Balance</div>
                             <div class="text-xs text-white font-mono">$${target.toFixed(0)}</div>
                        </div>
                         <div class="text-right">
                             <div class="text-[10px] text-muted mb-1">Payment Required</div>
                             <div class="text-sm font-mono font-bold ${payment > 0 ? 'text-primary' : 'text-gray-500'}">$${payment.toFixed(2)}</div>
                        </div>
                    </div>
                 `;
            });

            html += `</div>
                <div class="mt-8 pt-6 border-t border-white/10 flex justify-between items-end bg-white/5 -mx-8 -mb-8 p-8">
                    <span class="text-muted text-xs uppercase tracking-widest font-bold">Total Liquidity Required</span>
                    <div class="flex flex-col text-right">
                        <span class="text-4xl text-white font-black font-mono tracking-tighter">$${totalPay.toLocaleString(undefined, { minimumFractionDigits: 2 })}</span>
                        <span class="text-[10px] text-primary mt-1">IMMEDIATE ACTION RECOMMENDED</span>
                    </div>
                </div>
             </div>`;

            const res = document.getElementById('azeoResults');
            res.innerHTML = html;
            res.classList.remove('hidden');
        }

        // RISK Logic
        function checkRisk() {
            const input = document.getElementById('riskSteps').value;
            const steps = input.split(',').map(s => s.trim()).filter(s => s);

            const res = document.getElementById('riskResults');
            res.classList.remove('hidden');

            if (steps.length < 2) {
                res.innerHTML = `<div class="p-4 bg-danger/10 border border-danger text-danger font-mono text-sm rounded-xl">ERROR: Insufficient data points. Minimum 2 nodes required.</div>`;
                return;
            }

            const risks = [];
            for (let i = 0; i < steps.length - 2; i++) {
                if (steps[i].toLowerCase() === steps[i + 2].toLowerCase()) {
                    risks.push(`LOOP DETECTED: Node "${steps[i]}" re-accessed at index ${i + 3}. Circular velocity high.`);
                }
            }
            if (steps[0].toLowerCase() === steps[steps.length - 1].toLowerCase()) {
                risks.push(`CLOSED CIRCUIT: Start and End nodes identical ("${steps[0]}"). Shutdown probability: CRITICAL.`);
            }

            if (risks.length > 0) {
                res.innerHTML = `
                    <div class="p-6 bg-danger/10 border border-danger/50 rounded-2xl">
                        <h3 class="text-danger font-bold uppercase tracking-widest mb-4 flex items-center">
                            <span class="text-2xl mr-2 animate-pulse">‚ö†Ô∏è</span> Threat Model: COMPROMISED
                        </h3>
                        <ul class="space-y-3 font-mono text-sm text-red-200 list-none pl-2">
                            ${risks.map(r => `<li class="flex gap-2"><span class="text-danger">></span> ${r}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                res.innerHTML = `
                    <div class="p-6 bg-success/10 border border-success/50 rounded-2xl">
                        <h3 class="text-success font-bold uppercase tracking-widest mb-2 flex items-center">
                            <span class="text-2xl mr-2">‚úÖ</span> Threat Model: SECURE
                        </h3>
                        <p class="font-mono text-sm text-green-200 opacity-80">Topology appears linear. No circular references detected within current vector.</p>
                    </div>
                `;
            }
        }
    </script>
</body>

</html>